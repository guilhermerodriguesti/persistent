<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Métricas do Aluno - Dashboard</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .card-body {
            font-size: 16px;
        }
        .alert-success {
            color: #155724;
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        .alert-vermelho {
            color: #721c24;
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .alert-amarelo {
            color: #856404;
            background-color: #fff3cd;
            border-color: #ffeeba;
        }
        .alert-verde {
            color: #155724;
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
    </style>
</head>
<body>
<div class="container mt-5">
    <h2 class="text-center mb-4">Dashboard de Métricas do Aluno</h2>
    <div id="concurso" class="alert alert-success">
        <strong>Concurso:</strong> Concurso A - 2024
    </div>
    <button onclick="marcarMateriasVermelho()" class="btn btn-danger mb-3">Marcar matérias em vermelho</button>
    <table class="table">
        <thead>
            <tr>
                <th>Matéria</th>
                <th>Conteúdo</th>
                <th>Fase</th>
                <th>Questões Resolvidas</th>
                <th>Porcentagem de Acertos</th>
            </tr>
        </thead>
        <tbody>
            <tr class="alert-verde">
                <td rowspan="3">Administração</td>
                <td>Fundamentos e evolução da administração.</td>
                <td>1</td>
                <td>20</td>
                <td class="alert-verde">80%</td>
            </tr>
            <tr class="alert-verde">
                <td>Gestão por competências</td>
                <td>2</td>
                <td>25</td>
                <td>72</td> <!-- Ajustado para exemplificar uma alta porcentagem -->
                <td class="alert-verde">72%</td>
            </tr>
            <tr class="alert-verde">
                <td>Reengenharia organizacional</td>
                <td>3</td>
                <td>18</td>
                <td>68</td> <!-- Ajustado para exemplificar uma alta porcentagem -->
                <td class="alert-vermelho">68%</td> <!-- Ajustado para exemplificar uma média baixa -->
            </tr>
            <tr class="alert-verde">
                <td rowspan="3">Administração Orçamentária e Financeira</td>
                <td>Orçamento Público</td>
                <td>1</td>
                <td>15</td>
                <td class="alert-amarelo">48%</td> <!-- Ajustado para exemplificar uma porcentagem intermediária -->
            </tr>
            <tr class="alert-verde">
                <td>Dívida pública</td>
                <td>2</td>
                <td>22</td>
                <td>58</td> <!-- Ajustado para exemplificar uma porcentagem intermediária -->
                <td class="alert-verde">58%</td>
            </tr>
            <tr class="alert-verde">
                <td>Amostragem</td>
                <td>3</td>
                <td>20</td>
                <td>35</td> <!-- Ajustado para exemplificar uma baixa porcentagem -->
                <td class="alert-vermelho">35%</td> <!-- Ajustado para exemplificar uma média baixa -->
            </tr>
        </tbody>
    </table>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    // Função para marcar as matérias em vermelho novamente
    function marcarMateriasVermelho() {
        const materias = document.querySelectorAll('tr[class^="alert-verde"]');
        materias.forEach(materia => {
            materia.classList.remove('alert-verde');
            materia.classList.add('alert-vermelho');
        });
        atualizarAlertaConcurso();
    }

    // Atualizar alerta do concurso com base na média de acertos
    function atualizarAlertaConcurso() {
        const porcentagens = document.querySelectorAll('td[class^="alert-"]');
        let soma = 0;
        for (const porcentagem of porcentagens) {
            const valor = parseFloat(porcentagem.textContent);
            if (isNaN(valor)) continue;
            soma += valor;
        }
        const media = soma / porcentagens.length;
        const divConcurso = document.getElementById('concurso');
        if (media < 50) {
            divConcurso.classList.remove('alert-amarelo', 'alert-verde');
            divConcurso.classList.add('alert-vermelho');
            divConcurso.innerHTML = '<strong>Concurso:</strong> Concurso A - 2024 (Baixa chance de aprovação)';
        } else if (media >= 50 && media < 70) {
            divConcurso.classList.remove('alert-vermelho', 'alert-verde');
            divConcurso.classList.add('alert-amarelo');
            divConcurso.innerHTML = '<strong>Concurso:</strong> Concurso A - 2024 (Chance intermediária de aprovação)';
        } else {
            divConcurso.classList.remove('alert-vermelho', 'alert-amarelo');
            divConcurso.classList.add('alert-verde');
            divConcurso.innerHTML = '<strong>Concurso:</strong> Concurso A - 2024 (Alta chance de aprovação)';
        }
    }

    // Executar a atualização do alerta do concurso ao carregar a página
    window.onload = function() {
        atualizarAlertaConcurso();
    };
</script>
</body>
</html>
